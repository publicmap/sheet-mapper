<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sheet Mapper</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://unpkg.com/papaparse@5.3.0/papaparse.min.js'></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>

    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.min.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.css' type='text/css' />
    
    <!-- Generate legend from Mapbox styles https://github.com/watergis/mapbox-gl-legend -->
    <link href='https://watergis.github.io/mapbox-gl-legend/mapbox-gl-legend.css' rel='stylesheet' />
<script src="https://watergis.github.io/mapbox-gl-legend/mapbox-gl-legend.js"></script>

    <style>
        body { margin: 0; padding: 0; }
        #map { position: relative; height: calc(100vh - 120px); width: 100%; }
        #center-marker {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 1;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-white shadow-md p-4">
        <div class="container mx-auto">
            <!-- Sheet button row -->
            <div class="mb-4">
                <a id="viewSheetData" href="#" target="_blank" class="inline-block px-4 py-2 bg-blue-500 text-white font-bold rounded hover:bg-blue-600">
                    Open Spreadsheet
                    <svg class="inline-block w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                    </svg>
                </a>
            </div>
            <!-- Filters row -->
            <div id="filterContainer" class="flex flex-wrap items-center gap-2">
                <!-- Filters will be dynamically added here -->
            </div>
        </div>
    </header>

    <!-- Main content -->
    <div class="container mx-auto flex">
        <!-- Sidebar -->
        <div id="sidebar" class="w-1/4 bg-white p-4 overflow-y-auto h-[calc(100vh-120px)]"></div>
        <!-- Map container -->
        <div class="w-3/4">
            <div id="map">
                <div id="center-marker">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="10" cy="10" r="8" stroke="black" stroke-width="2"/>
                        <circle cx="10" cy="10" r="2" fill="black"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Add this before sheet-mapper.js -->
    <script src="sheet-to-geojson.js"></script>
    <script src="sheet-mapper.js"></script>
</body>
</html>
